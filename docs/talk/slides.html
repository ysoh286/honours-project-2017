<!DOCTYPE html>
<html>
  <head>
    <title>Web interactive plots in R</title>
    <meta charset="utf-8">
    <meta name="author" content="Yu Han Soh" />
    <meta name="author" content="ysoh286@aucklanduni.ac.nz" />
    <link href="slides_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="slides_files/remark-css-0.0.1/fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Web interactive plots in R
### Yu Han Soh
### <a href="mailto:ysoh286@aucklanduni.ac.nz">ysoh286@aucklanduni.ac.nz</a>

---




## The goal

&gt; ### Investigate ways of producing web interactive plots in R, and come up with a possible solution that could be used with iNZight.

--

- Briefly introduce some tools for creating web interactive visualisations and
  how they work

- realise that many of these tools are great for certain interactions, but difficult
and not designed to be extended further

- introduce a more easier and flexible solution for turning static R plots
into interactive ones (interactr)
---

## Interactive graphics

### What is interactive graphics?
&gt; "querying, selection and linking, and varying plot characteristics"
- Theus, Unwin, Hoffmann(2006)

--

### Why do we need it?
- exploratory data analysis, get key insights faster
--

### Why the web?
- accessible + portable
- avoid installation issues and device compatibility
- A good platform for displaying interactive graphics

???
Querying involves finding out more about features that the user may be interested in, selection and linking involves subsetting a certain group and linking to different displays of the same data set, while varying plot characteristics involve changing parts of the plot to get more information which could include “rescaling, zooming, reordering and reshading”

---

## plotly

&lt;img src="./img/d1.svg" width="80%" style="display: block; margin: auto;" /&gt;

&lt;img src="./img/plotly.gif" width="80%" style="display: block; margin: auto;" /&gt;

???
- was originally only restricted to row-observation data, but now
extends to dynamic aggregates.

---

## animint

&lt;img src="./img/animint.gif" width="100%" style="display: block; margin: auto;" /&gt;

---

## shiny

- provides a way of linking multiple views together
- establishes a connection between R and the browser

&lt;img src="./img/shiny1.gif" width="35%" style="display: block; margin: auto;" /&gt;

&lt;img src="./img/shiny-diagram.svg" width="60%" style="display: block; margin: auto;" /&gt;
---

## shiny

&lt;img src="./img/shiny2.gif" width="70%" style="display: block; margin: auto;" /&gt;
--

- Interactions can be made directly on a plot, but only if:
  - it is rendered in ggplot2 or base R
  - AND has to be a scatter plot
      ...unless you want to define your own mappings


---

## ggvis

&lt;img src="./img/ggvis.gif" width="70%" style="display: block; margin: auto;" /&gt;
---

## Other tools...

Using lower level tools like gridSVG, the DOM package and plain JavaScript
help us achieve the interactions we want, but require too much effort.

&lt;img src="./img/out.gif" width="40%" style="display: block; margin: auto;" /&gt;

... take a guess at how many lines of code this takes?

---

## So far...
Some good current tools provide certain types of interactivity basically effort free,
but a huge effort is required in doing anything beyond what is canned.

- tendency to reproduce entire plots (shiny)

- cannot easily customise or add interactions onto the plot
  - not without expert knowledge + knowing web tech :(

- Limited support for other R graphics (lattice, graphics plots,
    'grid' plotting systems other than ggplot2)
---

## A more general solution...

![](./img/main-idea.svg)&lt;!-- --&gt;
&lt;br&gt;

- the interactr package provides functions to help make your static plot in R into something interactive!

- Based upon graphical elements present rather than data

---

## Examples: A simple circle


```r
library(grid)
library(interactr)

circle &lt;- grid.circle(x = 0.5, y = 0.5, r = 0.25, name = "circle.A",
                      gp = gpar(fill = "yellow"))
listElements(circle)
```

```
## circle.A
```

```r
interaction &lt;- list(hover = styleHover(attrs = list(fill = "red",
                                                    fill.opacity = "1")))
draw(bw, "circle.A", interaction, new.page = TRUE)
```

&lt;img src="./img/circle.gif" width="25%" style="display: block; margin: auto;" /&gt;

---

## Examples: A linking box plot

&lt;img src="./img/bp.gif" width="100%" style="display: block; margin: auto;" /&gt;

---

## Examples: Trend lines

We have added a new line element onto the existing plot to render the
second smoother based upon the points that are selected within the drag-box.

&lt;img src="./img/tl.gif" width="45%" style="display: block; margin: auto;" /&gt;

---

## Advantages

- Compatible with plots drawn in R (lattice, ggplot2, graphics...)

- Only updates specific components of the plot

- more with less effort in comparison to lower level tools

---

## Limitations

- Name matching between elements

--


```r
sp &lt;- xyplot(Petal.Length ~ Petal.Width, data = iris)
listElements(sp)
```

&lt;img src="./img/lattice.png" width="1701" /&gt;
---

## More limitations

- Graphics device must be open in R and links to a single plot window

- need for simplicity

- Only acts as a proof-of-concept - currently limited to certain interactions

---
## Key takeaways

- There is a need for web interactive graphics

- Many of these tools are great for achieving certain interactions, but are somewhat canned
when going beyond

- The interactr package acts as a proof-of-concept for providing simple interactivity to static R plots without the need to know JavaScript (+ a possible solution for extending interactive features for iNZight)

- the world of web interactive graphics remains dynamic, and will continue to evolve

--

### Thank you! Questions? :)
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"css": "default",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
